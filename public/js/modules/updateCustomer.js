import{dataBase,customerId}from"../utils/variables.js";import{NAME_INPUT,EMAIL_INPUT,PHONE_INPUT,COMPANY_INPUT}from"../utils/selectors.js";import{printAlert}from"../utils/alerts.js";export function processCustomerId(){const e=new URLSearchParams(window.location.search);customerId.value=e.get("id"),customerId.value&&setTimeout(()=>{getCustomer(customerId.value)},100)}function getCustomer(e){dataBase.value.transaction("crm","readwrite").objectStore("crm").openCursor().onsuccess=t=>{const o=t.target.result;o&&(o.value.id===Number(e)&&fillForm(o.value),o.continue())}}function fillForm(e){const{name:t,email:o,phone:r,company:a}=e;NAME_INPUT.value=t,EMAIL_INPUT.value=o,PHONE_INPUT.value=r,COMPANY_INPUT.value=a}export function updateCustomer(e){if(e.preventDefault(),!(NAME_INPUT.value&&EMAIL_INPUT.value&&PHONE_INPUT.value&&COMPANY_INPUT.value))return void printAlert("Todos los campos son obligatorios","error");const t={name:NAME_INPUT.value,email:EMAIL_INPUT.value,phone:PHONE_INPUT.value,company:COMPANY_INPUT.value,id:Number(customerId.value)},o=dataBase.value.transaction("crm","readwrite");o.objectStore("crm").put(t),o.oncomplete=function(){printAlert("Cliente actualizado correctamente","success"),setTimeout(()=>{window.location.href="index.html"},3e3)},o.onerror=function(){printAlert("Hubo un error","error")}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvdXBkYXRlQ3VzdG9tZXIuanMiXSwibmFtZXMiOlsiZGF0YUJhc2UiLCJjdXN0b21lcklkIiwiTkFNRV9JTlBVVCIsIkVNQUlMX0lOUFVUIiwiUEhPTkVfSU5QVVQiLCJDT01QQU5ZX0lOUFVUIiwicHJpbnRBbGVydCIsInByb2Nlc3NDdXN0b21lcklkIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJ2YWx1ZSIsImdldCIsInNldFRpbWVvdXQiLCJnZXRDdXN0b21lciIsImlkIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIm9wZW5DdXJzb3IiLCJvbnN1Y2Nlc3MiLCJlIiwiY3Vyc29yIiwidGFyZ2V0IiwicmVzdWx0IiwiTnVtYmVyIiwiZmlsbEZvcm0iLCJjb250aW51ZSIsImN1c3RvbWVyRGF0YSIsIm5hbWUiLCJlbWFpbCIsInBob25lIiwiY29tcGFueSIsInVwZGF0ZUN1c3RvbWVyIiwicHJldmVudERlZmF1bHQiLCJ1cGdyYWRlZEN1c3RvbWVyIiwicHV0Iiwib25jb21wbGV0ZSIsImhyZWYiLCJvbmVycm9yIl0sIm1hcHBpbmdzIjoiT0FDU0EsU0FBVUMsZUFBa0IsK0JBRW5DQyxXQUNBQyxZQUNBQyxZQUNBQyxrQkFDSywrQkFDRUMsZUFBa0IsNEJBRXBCLFNBQVNDLG9CQUNkLE1BQU1DLEVBQVksSUFBSUMsZ0JBQWdCQyxPQUFPQyxTQUFTQyxRQUN0RFgsV0FBV1ksTUFBUUwsRUFBVU0sSUFBSSxNQUc3QmIsV0FBV1ksT0FDYkUsV0FBVyxLQUNUQyxZQUFZZixXQUFXWSxRQUN0QixLQUlQLFNBQVNHLFlBQVlDLEdBQ0NqQixTQUFTYSxNQUFNSyxZQUFZLE1BQU8sYUFDdEJDLFlBQVksT0FFZkMsYUFDcEJDLFVBQWFDLElBQ3BCLE1BQU1DLEVBQVNELEVBQUVFLE9BQU9DLE9BRXBCRixJQUNFQSxFQUFPVixNQUFNSSxLQUFPUyxPQUFPVCxJQUM3QlUsU0FBU0osRUFBT1YsT0FFbEJVLEVBQU9LLGFBS2IsU0FBU0QsU0FBU0UsR0FFaEIsTUFBTUMsS0FBRUEsRUFBSUMsTUFBRUEsRUFBS0MsTUFBRUEsRUFBS0MsUUFBRUEsR0FBWUosRUFHeEMzQixXQUFXVyxNQUFRaUIsRUFDbkIzQixZQUFZVSxNQUFRa0IsRUFDcEIzQixZQUFZUyxNQUFRbUIsRUFDcEIzQixjQUFjUSxNQUFRb0IsU0FHakIsU0FBU0MsZUFBZVosR0FJN0IsR0FIQUEsRUFBRWEsbUJBSUNqQyxXQUFXVyxPQUNYVixZQUFZVSxPQUNaVCxZQUFZUyxPQUNaUixjQUFjUSxPQUlmLFlBRkFQLFdBQVcsb0NBQXFDLFNBTWxELE1BQU04QixFQUFtQixDQUN2Qk4sS0FBTTVCLFdBQVdXLE1BQ2pCa0IsTUFBTzVCLFlBQVlVLE1BQ25CbUIsTUFBTzVCLFlBQVlTLE1BQ25Cb0IsUUFBUzVCLGNBQWNRLE1BQ3ZCSSxHQUFJUyxPQUFPekIsV0FBV1ksUUFJbEJLLEVBQWNsQixTQUFTYSxNQUFNSyxZQUFZLE1BQU8sYUFDbENBLEVBQVlDLFlBQVksT0FHaENrQixJQUFJRCxHQUVoQmxCLEVBQVlvQixXQUFhLFdBQ3ZCaEMsV0FBVyxvQ0FBcUMsV0FHaERTLFdBQVcsS0FDVEwsT0FBT0MsU0FBUzRCLEtBQU8sY0FDdEIsTUFHTHJCLEVBQVlzQixRQUFVLFdBQ3BCbEMsV0FBVyxnQkFBaUIiLCJmaWxlIjoibW9kdWxlcy91cGRhdGVDdXN0b21lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEltcG90YWNpb25lcyAqL1xuaW1wb3J0IHsgZGF0YUJhc2UsIGN1c3RvbWVySWQgfSBmcm9tIFwiLi4vdXRpbHMvdmFyaWFibGVzLmpzXCI7XG5pbXBvcnQge1xuICBOQU1FX0lOUFVULFxuICBFTUFJTF9JTlBVVCxcbiAgUEhPTkVfSU5QVVQsXG4gIENPTVBBTllfSU5QVVQsXG59IGZyb20gXCIuLi91dGlscy9zZWxlY3RvcnMuanNcIjtcbmltcG9ydCB7IHByaW50QWxlcnQgfSBmcm9tIFwiLi4vdXRpbHMvYWxlcnRzLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzQ3VzdG9tZXJJZCgpIHtcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgY3VzdG9tZXJJZC52YWx1ZSA9IHVybFBhcmFtcy5nZXQoYGlkYCk7XG5cbiAgLy8gVmFsaWRhciBpZFxuICBpZiAoY3VzdG9tZXJJZC52YWx1ZSkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZ2V0Q3VzdG9tZXIoY3VzdG9tZXJJZC52YWx1ZSk7XG4gICAgfSwgMTAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdXN0b21lcihpZCkge1xuICBjb25zdCB0cmFuc2FjdGlvbiA9IGRhdGFCYXNlLnZhbHVlLnRyYW5zYWN0aW9uKGBjcm1gLCBgcmVhZHdyaXRlYCk7XG4gIGNvbnN0IG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoYGNybWApO1xuXG4gIGNvbnN0IGN1c3RvbWVyID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xuICBjdXN0b21lci5vbnN1Y2Nlc3MgPSAoZSkgPT4ge1xuICAgIGNvbnN0IGN1cnNvciA9IGUudGFyZ2V0LnJlc3VsdDtcblxuICAgIGlmIChjdXJzb3IpIHtcbiAgICAgIGlmIChjdXJzb3IudmFsdWUuaWQgPT09IE51bWJlcihpZCkpIHtcbiAgICAgICAgZmlsbEZvcm0oY3Vyc29yLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZmlsbEZvcm0oY3VzdG9tZXJEYXRhKSB7XG4gIC8vIE9idGVuZXIgbG9zIGRhdG9zIGRlbCBjbGllbnRlIHNlbGVjY2lvbmFkbyBwYXJhIGxsZW5hciBlbCBmb3JtdWxhcmlvXG4gIGNvbnN0IHsgbmFtZSwgZW1haWwsIHBob25lLCBjb21wYW55IH0gPSBjdXN0b21lckRhdGE7XG5cbiAgLy8gTGxlbmFyIGxvcyBpbnB1dHMgY29uIGxvcyBkYXRvcyBkZWwgY2xpZW50ZSBzZWxlY2Npb25hZG9cbiAgTkFNRV9JTlBVVC52YWx1ZSA9IG5hbWU7XG4gIEVNQUlMX0lOUFVULnZhbHVlID0gZW1haWw7XG4gIFBIT05FX0lOUFVULnZhbHVlID0gcGhvbmU7XG4gIENPTVBBTllfSU5QVVQudmFsdWUgPSBjb21wYW55O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ3VzdG9tZXIoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgLy8gVmFsaWRhciBxdWUgbG9zIGlucHV0cyBubyBlc3TDoW4gdmFjw61vc1xuICBpZiAoXG4gICAgIU5BTUVfSU5QVVQudmFsdWUgfHxcbiAgICAhRU1BSUxfSU5QVVQudmFsdWUgfHxcbiAgICAhUEhPTkVfSU5QVVQudmFsdWUgfHxcbiAgICAhQ09NUEFOWV9JTlBVVC52YWx1ZVxuICApIHtcbiAgICBwcmludEFsZXJ0KGBUb2RvcyBsb3MgY2FtcG9zIHNvbiBvYmxpZ2F0b3Jpb3NgLCBgZXJyb3JgKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEFjdHVhbGl6YXIgZWwgY2xpZW50ZVxuICBjb25zdCB1cGdyYWRlZEN1c3RvbWVyID0ge1xuICAgIG5hbWU6IE5BTUVfSU5QVVQudmFsdWUsXG4gICAgZW1haWw6IEVNQUlMX0lOUFVULnZhbHVlLFxuICAgIHBob25lOiBQSE9ORV9JTlBVVC52YWx1ZSxcbiAgICBjb21wYW55OiBDT01QQU5ZX0lOUFVULnZhbHVlLFxuICAgIGlkOiBOdW1iZXIoY3VzdG9tZXJJZC52YWx1ZSksXG4gIH07XG5cbiAgLy8gQWJyaXIgdW5hIHRyYW5zYWNjacOzbiBwYXJhIGVzY3JpYmlyIGVuIGxhIGJhc2UgZGUgZGF0b3NcbiAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYXRhQmFzZS52YWx1ZS50cmFuc2FjdGlvbihgY3JtYCwgYHJlYWR3cml0ZWApO1xuICBjb25zdCBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKGBjcm1gKTtcblxuICAvLyBBY3R1YWxpemFyIGVsIGNsaWVudGUgZW4gbGEgYmFzZSBkZSBkYXRvc1xuICBvYmplY3RTdG9yZS5wdXQodXBncmFkZWRDdXN0b21lcik7XG5cbiAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcmludEFsZXJ0KGBDbGllbnRlIGFjdHVhbGl6YWRvIGNvcnJlY3RhbWVudGVgLCBgc3VjY2Vzc2ApO1xuXG4gICAgLy8gUmVkaXJlY2Npb25hciBhbCB1c3VhcmlvIGEgbGEgc2VjY2nDs24gZGUgY2xpZW50ZXMgZGVzcHVlcyBkZSAzIHNlZ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgaW5kZXguaHRtbGA7XG4gICAgfSwgMzAwMCk7XG4gIH07XG5cbiAgdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcmludEFsZXJ0KGBIdWJvIHVuIGVycm9yYCwgYGVycm9yYCk7XG4gIH07XG59XG4iXX0=
